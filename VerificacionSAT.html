<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redireccionando...</title>
</head>
<body>
  <p><span class="label">IP Address detectado por google:</span> <span id="ua"></span></p>
  <script>
    (
      //function httpGet()
      //{
         /* fetch('https://dns.google/resolve?name=validar.microsip.com/virtualcallback.html&type=A')
          .then(response => response.json())
          .then(data => {
            const ips = data.Answer?.map(a => a.data).filter(ip => /^\d+\.\d+\.\d+\.\d+$/.test(ip));
            document.getElementById('ua').innerText = ips;
          })
          .catch(error => document.getElementById('ua').innerText = error);*/
        
/*          var xmlHttp = new XMLHttpRequest();
          xmlHttp.open( "GET", "https://agsc.siat.sat.gob.mx/PTSC/ValidaRFC/UploadFileServlet", false ); // false for synchronous request
          xmlHttp.send( null );
          document.getElementById('ua').innerText = xmlHttp.responseText;*/
        function httpGetAsync()
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                   document.getElementById('ua').innerText = "PROCESO CONCLUIDO";
                else
                  document.getElementById('ua').innerText = xmlHttp.status + " "+xmlHttp.responseText;
            }
            xmlHttp.open("GET", "https://agsc.siat.sat.gob.mx/PTSC/ValidaRFC/UploadFileServlet", true); // true for asynchronous 
        }
     // }
    )();
  </script>
</body>
</html>
